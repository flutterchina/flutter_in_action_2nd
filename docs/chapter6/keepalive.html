<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>6.8 å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜ | ã€ŠFlutterå®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/assets/img/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.c0f2585a.css" as="style"><link rel="preload" href="/assets/js/app.aca657e0.js" as="script"><link rel="preload" href="/assets/js/41.42263e36.js" as="script"><link rel="preload" href="/assets/js/2.1bded63b.js" as="script"><link rel="preload" href="/assets/js/33.7402ce18.js" as="script"><link rel="prefetch" href="/assets/js/10.ade357f4.js"><link rel="prefetch" href="/assets/js/100.d9336c25.js"><link rel="prefetch" href="/assets/js/101.44ac9673.js"><link rel="prefetch" href="/assets/js/102.dc54e50d.js"><link rel="prefetch" href="/assets/js/103.c5ade28d.js"><link rel="prefetch" href="/assets/js/104.91f58eb7.js"><link rel="prefetch" href="/assets/js/105.d879d16b.js"><link rel="prefetch" href="/assets/js/106.c62c04e3.js"><link rel="prefetch" href="/assets/js/107.c90621a5.js"><link rel="prefetch" href="/assets/js/108.ace7ede7.js"><link rel="prefetch" href="/assets/js/109.5f803446.js"><link rel="prefetch" href="/assets/js/11.39bd6c05.js"><link rel="prefetch" href="/assets/js/110.90d29c94.js"><link rel="prefetch" href="/assets/js/111.06481318.js"><link rel="prefetch" href="/assets/js/112.feec4674.js"><link rel="prefetch" href="/assets/js/113.de32b696.js"><link rel="prefetch" href="/assets/js/114.fa6c1d35.js"><link rel="prefetch" href="/assets/js/115.532aa069.js"><link rel="prefetch" href="/assets/js/116.431ffa2a.js"><link rel="prefetch" href="/assets/js/117.df0735bb.js"><link rel="prefetch" href="/assets/js/118.0210f204.js"><link rel="prefetch" href="/assets/js/119.d3ee5d41.js"><link rel="prefetch" href="/assets/js/12.65757a43.js"><link rel="prefetch" href="/assets/js/120.dc9c27ec.js"><link rel="prefetch" href="/assets/js/121.0a0aa4d8.js"><link rel="prefetch" href="/assets/js/122.bcafcc6d.js"><link rel="prefetch" href="/assets/js/123.771c2f75.js"><link rel="prefetch" href="/assets/js/124.58be360b.js"><link rel="prefetch" href="/assets/js/125.f605839b.js"><link rel="prefetch" href="/assets/js/126.3af112ff.js"><link rel="prefetch" href="/assets/js/127.cb5c215b.js"><link rel="prefetch" href="/assets/js/128.eadac812.js"><link rel="prefetch" href="/assets/js/129.7cd63abc.js"><link rel="prefetch" href="/assets/js/13.0297d291.js"><link rel="prefetch" href="/assets/js/130.a089f076.js"><link rel="prefetch" href="/assets/js/131.6b4d4c0c.js"><link rel="prefetch" href="/assets/js/132.146767da.js"><link rel="prefetch" href="/assets/js/14.349231d6.js"><link rel="prefetch" href="/assets/js/15.5e0bc5b3.js"><link rel="prefetch" href="/assets/js/16.4d277875.js"><link rel="prefetch" href="/assets/js/17.7862c6ff.js"><link rel="prefetch" href="/assets/js/18.bba85e3a.js"><link rel="prefetch" href="/assets/js/19.0c627273.js"><link rel="prefetch" href="/assets/js/20.f09a03d1.js"><link rel="prefetch" href="/assets/js/21.c4c43bde.js"><link rel="prefetch" href="/assets/js/22.b8b2b34c.js"><link rel="prefetch" href="/assets/js/23.0568ab42.js"><link rel="prefetch" href="/assets/js/24.04786c23.js"><link rel="prefetch" href="/assets/js/25.b23fd44e.js"><link rel="prefetch" href="/assets/js/26.a6cc9471.js"><link rel="prefetch" href="/assets/js/27.5b4993c1.js"><link rel="prefetch" href="/assets/js/28.f1d06372.js"><link rel="prefetch" href="/assets/js/29.913eaf60.js"><link rel="prefetch" href="/assets/js/3.e3b6b57f.js"><link rel="prefetch" href="/assets/js/30.659aaa10.js"><link rel="prefetch" href="/assets/js/31.d00e9639.js"><link rel="prefetch" href="/assets/js/32.ab6119c2.js"><link rel="prefetch" href="/assets/js/34.096b5c91.js"><link rel="prefetch" href="/assets/js/35.22f54c5a.js"><link rel="prefetch" href="/assets/js/36.76f22683.js"><link rel="prefetch" href="/assets/js/37.b0e343bc.js"><link rel="prefetch" href="/assets/js/38.89cc1325.js"><link rel="prefetch" href="/assets/js/39.b6427210.js"><link rel="prefetch" href="/assets/js/4.db7597cb.js"><link rel="prefetch" href="/assets/js/40.2903107c.js"><link rel="prefetch" href="/assets/js/42.c5b89257.js"><link rel="prefetch" href="/assets/js/43.e11f3e0a.js"><link rel="prefetch" href="/assets/js/44.3470380b.js"><link rel="prefetch" href="/assets/js/45.7916a8db.js"><link rel="prefetch" href="/assets/js/46.8fd88c7a.js"><link rel="prefetch" href="/assets/js/47.0319aadb.js"><link rel="prefetch" href="/assets/js/48.1f9b08fe.js"><link rel="prefetch" href="/assets/js/49.e71b4348.js"><link rel="prefetch" href="/assets/js/5.ee958553.js"><link rel="prefetch" href="/assets/js/50.ceea4507.js"><link rel="prefetch" href="/assets/js/51.bc43d776.js"><link rel="prefetch" href="/assets/js/52.de0b3aa9.js"><link rel="prefetch" href="/assets/js/53.bd1f00f6.js"><link rel="prefetch" href="/assets/js/54.473489d1.js"><link rel="prefetch" href="/assets/js/55.8971302a.js"><link rel="prefetch" href="/assets/js/56.ee50465c.js"><link rel="prefetch" href="/assets/js/57.d9dc551f.js"><link rel="prefetch" href="/assets/js/58.86fb1387.js"><link rel="prefetch" href="/assets/js/59.b5b11140.js"><link rel="prefetch" href="/assets/js/6.14f619ca.js"><link rel="prefetch" href="/assets/js/60.b87f499a.js"><link rel="prefetch" href="/assets/js/61.34912447.js"><link rel="prefetch" href="/assets/js/62.b2138b7a.js"><link rel="prefetch" href="/assets/js/63.34a0797f.js"><link rel="prefetch" href="/assets/js/64.b165efbf.js"><link rel="prefetch" href="/assets/js/65.df0abda1.js"><link rel="prefetch" href="/assets/js/66.0ca8b982.js"><link rel="prefetch" href="/assets/js/67.d9fb8ee8.js"><link rel="prefetch" href="/assets/js/68.6e3398a1.js"><link rel="prefetch" href="/assets/js/69.8d631648.js"><link rel="prefetch" href="/assets/js/7.667b76ee.js"><link rel="prefetch" href="/assets/js/70.43e8c35f.js"><link rel="prefetch" href="/assets/js/71.4ce397c4.js"><link rel="prefetch" href="/assets/js/72.d9f1b45f.js"><link rel="prefetch" href="/assets/js/73.f7c7c1a2.js"><link rel="prefetch" href="/assets/js/74.637f43f4.js"><link rel="prefetch" href="/assets/js/75.0d9e8fc3.js"><link rel="prefetch" href="/assets/js/76.06598d54.js"><link rel="prefetch" href="/assets/js/77.3877a20c.js"><link rel="prefetch" href="/assets/js/78.bd3e36ad.js"><link rel="prefetch" href="/assets/js/79.734734cb.js"><link rel="prefetch" href="/assets/js/8.e399ba79.js"><link rel="prefetch" href="/assets/js/80.68409fd0.js"><link rel="prefetch" href="/assets/js/81.a888d6ff.js"><link rel="prefetch" href="/assets/js/82.a31967d2.js"><link rel="prefetch" href="/assets/js/83.20c81ba4.js"><link rel="prefetch" href="/assets/js/84.f4c80eec.js"><link rel="prefetch" href="/assets/js/85.d9ca477d.js"><link rel="prefetch" href="/assets/js/86.a69f38dd.js"><link rel="prefetch" href="/assets/js/87.f9684ec9.js"><link rel="prefetch" href="/assets/js/88.e6c88f58.js"><link rel="prefetch" href="/assets/js/89.659d49ab.js"><link rel="prefetch" href="/assets/js/9.8e8bb932.js"><link rel="prefetch" href="/assets/js/90.d0d907a4.js"><link rel="prefetch" href="/assets/js/91.d39ffbaa.js"><link rel="prefetch" href="/assets/js/92.a603e308.js"><link rel="prefetch" href="/assets/js/93.f7d06098.js"><link rel="prefetch" href="/assets/js/94.749fc5fa.js"><link rel="prefetch" href="/assets/js/95.448bb8eb.js"><link rel="prefetch" href="/assets/js/96.da2b239a.js"><link rel="prefetch" href="/assets/js/97.a5354cbe.js"><link rel="prefetch" href="/assets/js/98.4284c70c.js"><link rel="prefetch" href="/assets/js/99.d5fb4268.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c0f2585a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="ã€ŠFlutterå®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹" class="logo"> <span class="site-name can-hide">ã€ŠFlutterå®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/flutterchina/flukit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flukitç»„ä»¶åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flutterä¸­å›½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina/flutter_in_action_2nd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/flutterchina/flukit" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flukitç»„ä»¶åº“
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Flutterä¸­å›½
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/flutterchina/flutter_in_action_2nd" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/preface.html" class="sidebar-link">ç¬¬äºŒç‰ˆåº</a></li><li><section class="sidebar-group depth-0"><a href="/chapter6/chapter1/index" class="sidebar-heading clickable"><span>ç¬¬ä¸€ç« ï¼šèµ·æ­¥</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter1/mobile_development_intro.html" class="sidebar-link">1.1 ç§»åŠ¨å¼€å‘æŠ€æœ¯ç®€ä»‹</a></li><li><a href="/chapter1/flutter_intro.html" class="sidebar-link">1.2 åˆè¯† Flutter</a></li><li><a href="/chapter1/install_flutter.html" class="sidebar-link">1.3 æ­å»ºFlutterå¼€å‘ç¯å¢ƒ</a></li><li><a href="/chapter1/dart.html" class="sidebar-link">1.4 Dartè¯­è¨€ç®€ä»‹</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter2/index" class="sidebar-heading clickable"><span>ç¬¬äºŒç« ï¼šç¬¬ä¸€ä¸ªFlutteråº”ç”¨</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter2/first_flutter_app.html" class="sidebar-link">2.1 è®¡æ•°å™¨åº”ç”¨ç¤ºä¾‹</a></li><li><a href="/chapter2/flutter_widget_intro.html" class="sidebar-link">2.2  Widget ç®€ä»‹</a></li><li><a href="/chapter2/state_manage.html" class="sidebar-link">2.3 çŠ¶æ€ç®¡ç†</a></li><li><a href="/chapter2/flutter_router.html" class="sidebar-link">2.4 è·¯ç”±ç®¡ç†</a></li><li><a href="/chapter2/flutter_package_mgr.html" class="sidebar-link">2.5 åŒ…ç®¡ç†</a></li><li><a href="/chapter2/flutter_assets_mgr.html" class="sidebar-link">2.6 èµ„æºç®¡ç†</a></li><li><a href="/chapter2/flutter_app_debug.html" class="sidebar-link">2.7 è°ƒè¯•Flutteråº”ç”¨</a></li><li><a href="/chapter2/thread_model_and_error_report.html" class="sidebar-link">2.8 Flutterå¼‚å¸¸æ•è·</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter3/index" class="sidebar-heading clickable"><span>ç¬¬ä¸‰ç« ï¼šåŸºç¡€ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter3/text.html" class="sidebar-link">3.1 æ–‡æœ¬åŠæ ·å¼</a></li><li><a href="/chapter3/buttons.html" class="sidebar-link">3.2 æŒ‰é’®</a></li><li><a href="/chapter3/img_and_icon.html" class="sidebar-link">3.3 å›¾ç‰‡åŠICON</a></li><li><a href="/chapter3/radio_and_checkbox.html" class="sidebar-link">3.4 å•é€‰å¼€å…³å’Œå¤é€‰æ¡†</a></li><li><a href="/chapter3/input_and_form.html" class="sidebar-link">3.5 è¾“å…¥æ¡†åŠè¡¨å•</a></li><li><a href="/chapter3/progress.html" class="sidebar-link">3.6 è¿›åº¦æŒ‡ç¤ºå™¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter6/chapter4/index.md" class="sidebar-heading clickable"><span>ç¬¬å››ç« ï¼šå¸ƒå±€ç±»ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter4/intro.html" class="sidebar-link">4.1 å¸ƒå±€ç±»ç»„ä»¶ç®€ä»‹</a></li><li><a href="/chapter4/constraints.html" class="sidebar-link">4.2 å¸ƒå±€åŸç†ä¸çº¦æŸï¼ˆconstraintsï¼‰</a></li><li><a href="/chapter4/row_and_column.html" class="sidebar-link">4.3 çº¿æ€§å¸ƒå±€ï¼ˆRowå’ŒColumnï¼‰</a></li><li><a href="/chapter4/flex.html" class="sidebar-link">4.4 å¼¹æ€§å¸ƒå±€ï¼ˆFlexï¼‰</a></li><li><a href="/chapter4/wrap_and_flow.html" class="sidebar-link">4.5 æµå¼å¸ƒå±€ï¼ˆWrapã€Flowï¼‰</a></li><li><a href="/chapter4/stack.html" class="sidebar-link">4.6 å±‚å å¸ƒå±€ï¼ˆStackã€Positionedï¼‰</a></li><li><a href="/chapter4/alignment.html" class="sidebar-link">4.7 å¯¹é½ä¸ç›¸å¯¹å®šä½ï¼ˆAlignï¼‰</a></li><li><a href="/chapter4/layoutbuilder.html" class="sidebar-link">4.8 LayoutBuilderã€AfterLayout</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter5/index" class="sidebar-heading clickable"><span>ç¬¬äº”ç« ï¼šå®¹å™¨ç±»ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter5/padding.html" class="sidebar-link">5.1 å¡«å……ï¼ˆPaddingï¼‰</a></li><li><a href="/chapter5/decoratedbox.html" class="sidebar-link">5.2 è£…é¥°å®¹å™¨ï¼ˆDecoratedBoxï¼‰</a></li><li><a href="/chapter5/transform.html" class="sidebar-link">5.3 å˜æ¢ï¼ˆTransformï¼‰</a></li><li><a href="/chapter5/container.html" class="sidebar-link">5.4 å®¹å™¨ç»„ä»¶ï¼ˆContainerï¼‰</a></li><li><a href="/chapter5/clip.html" class="sidebar-link">5.5 å‰ªè£ï¼ˆClipï¼‰</a></li><li><a href="/chapter5/fittedbox.html" class="sidebar-link">5.6 ç©ºé—´é€‚é…ï¼ˆFittedBoxï¼‰</a></li><li><a href="/chapter5/material_scaffold.html" class="sidebar-link">5.7 é¡µé¢éª¨æ¶ï¼ˆScaffoldï¼‰</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter6/index" class="sidebar-heading clickable open"><span>ç¬¬å…­ç« ï¼šå¯æ»šåŠ¨ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter6/intro.html" class="sidebar-link">6.1 å¯æ»šåŠ¨ç»„ä»¶ç®€ä»‹</a></li><li><a href="/chapter6/single_child_scrollview.html" class="sidebar-link">6.2 SingleChildScrollView</a></li><li><a href="/chapter6/listview.html" class="sidebar-link">6.3 ListView</a></li><li><a href="/chapter6/scroll_controller.html" class="sidebar-link">6.4 æ»šåŠ¨ç›‘å¬åŠæ§åˆ¶</a></li><li><a href="/chapter6/animatedlist.html" class="sidebar-link">6.5 AnimatedList</a></li><li><a href="/chapter6/gridview.html" class="sidebar-link">6.6 GridView</a></li><li><a href="/chapter6/pageview.html" class="sidebar-link">6.7 PageViewä¸é¡µé¢ç¼“å­˜</a></li><li><a href="/chapter6/keepalive.html" aria-current="page" class="active sidebar-link">6.8 å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chapter6/keepalive.html#_6-8-1-automatickeepalive" class="sidebar-link">6.8.1 AutomaticKeepAlive</a></li><li class="sidebar-sub-header"><a href="/chapter6/keepalive.html#_6-8-2-keepalivewrapper" class="sidebar-link">6.8.2 KeepAliveWrapper</a></li></ul></li><li><a href="/chapter6/tabview.html" class="sidebar-link">6.9 TabBarView</a></li><li><a href="/chapter6/custom_scrollview.html" class="sidebar-link">6.10 CustomScrollView å’Œ Slivers</a></li><li><a href="/chapter6/sliver.html" class="sidebar-link">6.11 è‡ªå®šä¹‰ Sliver</a></li><li><a href="/chapter6/nestedscrollview.html" class="sidebar-link">6.12 åµŒå¥—å¯æ»šåŠ¨ç»„ä»¶ NestedScrollView</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter7/index" class="sidebar-heading clickable"><span>ç¬¬ä¸ƒç« ï¼šåŠŸèƒ½å‹ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter7/willpopscope.html" class="sidebar-link">7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰</a></li><li><a href="/chapter7/inherited_widget.html" class="sidebar-link">7.2 æ•°æ®å…±äº«ï¼ˆInheritedWidgetï¼‰</a></li><li><a href="/chapter7/provider.html" class="sidebar-link">7.3 è·¨ç»„ä»¶çŠ¶æ€å…±äº«</a></li><li><a href="/chapter7/theme.html" class="sidebar-link">7.4 é¢œè‰²å’Œä¸»é¢˜</a></li><li><a href="/chapter7/value_listenable_builder.html" class="sidebar-link">7.5 æŒ‰éœ€rebuildï¼ˆValueListenableBuilderï¼‰</a></li><li><a href="/chapter7/futurebuilder_and_streambuilder.html" class="sidebar-link">7.6 å¼‚æ­¥UIæ›´æ–°ï¼ˆFutureBuilderã€StreamBuilderï¼‰</a></li><li><a href="/chapter7/dailog.html" class="sidebar-link">7.7 å¯¹è¯æ¡†è¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter8/index" class="sidebar-heading clickable"><span>ç¬¬å…«ç« ï¼šäº‹ä»¶å¤„ç†ä¸é€šçŸ¥</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter8/listener.html" class="sidebar-link">8.1 åŸå§‹æŒ‡é’ˆäº‹ä»¶å¤„ç†</a></li><li><a href="/chapter8/gesture.html" class="sidebar-link">8.2 æ‰‹åŠ¿è¯†åˆ«</a></li><li><a href="/chapter8/hittest.html" class="sidebar-link">8.3 Flutteräº‹ä»¶æœºåˆ¶</a></li><li><a href="/chapter8/gesture_conflict.html" class="sidebar-link">8.4 æ‰‹åŠ¿åŸç†ä¸æ‰‹åŠ¿å†²çª</a></li><li><a href="/chapter8/eventbus.html" class="sidebar-link">8.5 äº‹ä»¶æ€»çº¿</a></li><li><a href="/chapter8/notification.html" class="sidebar-link">8.6 é€šçŸ¥ Notification</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter9/index" class="sidebar-heading clickable"><span>ç¬¬ä¹ç« ï¼šåŠ¨ç”»</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter9/intro.html" class="sidebar-link">9.1 FlutteråŠ¨ç”»ç®€ä»‹</a></li><li><a href="/chapter9/animation_structure.html" class="sidebar-link">9.2 åŠ¨ç”»åŸºæœ¬ç»“æ„åŠçŠ¶æ€ç›‘å¬</a></li><li><a href="/chapter9/route_transition.html" class="sidebar-link">9.3 è‡ªå®šä¹‰è·¯ç”±åˆ‡æ¢åŠ¨ç”»</a></li><li><a href="/chapter9/hero.html" class="sidebar-link">9.4 HeroåŠ¨ç”»</a></li><li><a href="/chapter9/stagger_animation.html" class="sidebar-link">9.5 äº¤ç»‡åŠ¨ç”»</a></li><li><a href="/chapter9/animated_switcher.html" class="sidebar-link">9.6 åŠ¨ç”»åˆ‡æ¢ç»„ä»¶ï¼ˆAnimatedSwitcherï¼‰</a></li><li><a href="/chapter9/animated_widgets.html" class="sidebar-link">9.7 åŠ¨ç”»è¿‡æ¸¡ç»„ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter10/index" class="sidebar-heading clickable"><span>ç¬¬åç« ï¼šè‡ªå®šä¹‰ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter10/intro.html" class="sidebar-link">10.1 è‡ªå®šä¹‰ç»„ä»¶æ–¹æ³•ç®€ä»‹</a></li><li><a href="/chapter10/combine.html" class="sidebar-link">10.2 ç»„åˆç°æœ‰ç»„ä»¶</a></li><li><a href="/chapter10/turn_box.html" class="sidebar-link">10.3 ç»„åˆå®ä¾‹ï¼šTurnBox</a></li><li><a href="/chapter10/custom_paint.html" class="sidebar-link">10.4 CustomPaint ä¸ Canvas</a></li><li><a href="/chapter10/gradient_circular_progress_demo.html" class="sidebar-link">10.5 è‡ªç»˜å®ä¾‹ï¼šåœ†å½¢èƒŒæ™¯æ¸å˜è¿›åº¦æ¡</a></li><li><a href="/chapter10/custom_checkbox.html" class="sidebar-link">10.6 è‡ªç»˜ç»„ä»¶ï¼šCustomCheckbox</a></li><li><a href="/chapter10/done_widget.html" class="sidebar-link">10.7 è‡ªç»˜ç»„ä»¶: DoneWidget</a></li><li><a href="/chapter10/watermark.html" class="sidebar-link">10.8 æ°´å°å®ä¾‹: æ–‡æœ¬ç»˜åˆ¶ä¸ç¦»å±æ¸²æŸ“</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter11/index" class="sidebar-heading clickable"><span>ç¬¬åä¸€ç« ï¼šæ–‡ä»¶æ“ä½œä¸ç½‘ç»œè¯·æ±‚</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter11/file_operation.html" class="sidebar-link">11.1 æ–‡ä»¶æ“ä½œ</a></li><li><a href="/chapter11/http.html" class="sidebar-link">11.2 é€šè¿‡HttpClientå‘èµ·HTTPè¯·æ±‚</a></li><li><a href="/chapter11/dio.html" class="sidebar-link">11.3 Httpè¯·æ±‚åº“-dio</a></li><li><a href="/chapter11/download_with_chunks.html" class="sidebar-link">11.4 å®ä¾‹ï¼šHttpåˆ†å—ä¸‹è½½</a></li><li><a href="/chapter11/websocket.html" class="sidebar-link">11.5 ä½¿ç”¨WebSockets</a></li><li><a href="/chapter11/socket.html" class="sidebar-link">11.6 ä½¿ç”¨Socket API</a></li><li><a href="/chapter11/json_model.html" class="sidebar-link">11.7 JSONè½¬Dart Modelç±»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter12/index" class="sidebar-heading clickable"><span>ç¬¬åäºŒç« ï¼šFlutter æ‰©å±•</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter12/package_and_plugin.html" class="sidebar-link">12.1 åŒ…å’Œæ’ä»¶</a></li><li><a href="/chapter12/flutter_web.html" class="sidebar-link">12.2 Flutter Web</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter13/index" class="sidebar-heading clickable"><span>ç¬¬åä¸‰ç« ï¼šå›½é™…åŒ–</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter13/multi_languages_support.html" class="sidebar-link">13.1 è®©Appæ”¯æŒå¤šè¯­è¨€</a></li><li><a href="/chapter13/locallization_implement.html" class="sidebar-link">13.2 å®ç°Localizations</a></li><li><a href="/chapter13/intl.html" class="sidebar-link">13.3 ä½¿ç”¨IntlåŒ…</a></li><li><a href="/chapter13/faq.html" class="sidebar-link">13.4 å›½é™…åŒ–å¸¸è§é—®é¢˜</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/chapter14/index" class="sidebar-heading clickable"><span>ç¬¬åå››ç« ï¼šFlutteræ ¸å¿ƒåŸç†</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter14/flutter_ui_system.html" class="sidebar-link">14.1 Flutter UI æ¡†æ¶ï¼ˆFrameworkï¼‰</a></li><li><a href="/chapter14/element_buildcontext.html" class="sidebar-link">14.2 Elementã€BuildContextå’ŒRenderObject</a></li><li><a href="/chapter14/flutter_app_startup.html" class="sidebar-link">14.3 Flutterå¯åŠ¨æµç¨‹å’Œæ¸²æŸ“ç®¡çº¿</a></li><li><a href="/chapter14/layout.html" class="sidebar-link">14.4 å¸ƒå±€ï¼ˆLayoutï¼‰è¿‡ç¨‹</a></li><li><a href="/chapter14/paint.html" class="sidebar-link">14.5 ç»˜åˆ¶ï¼ˆä¸€ï¼‰ç»˜åˆ¶åŸç†åŠLayer</a></li><li><a href="/chapter14/paint_flow.html" class="sidebar-link">14.6 ç»˜åˆ¶ï¼ˆäºŒï¼‰ç»„ä»¶æ ‘ç»˜åˆ¶æµç¨‹</a></li><li><a href="/chapter14/layer.html" class="sidebar-link">14.7 ç»˜åˆ¶ï¼ˆä¸‰ï¼‰Layer å®ä¾‹</a></li><li><a href="/chapter14/compositing.html" class="sidebar-link">14.8 ç»˜åˆ¶ï¼ˆå››ï¼‰Compositing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ç¬¬åäº”ç« ï¼šä¸€ä¸ªå®Œæ•´çš„Flutteråº”ç”¨</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/chapter15/intro.html" class="sidebar-link">15.1 Githubå®¢æˆ·ç«¯ç¤ºä¾‹</a></li><li><a href="/chapter15/code_structure.html" class="sidebar-link">15.2 Flutter APPä»£ç ç»“æ„</a></li><li><a href="/chapter15/models.html" class="sidebar-link">15.3 Modelç±»å®šä¹‰</a></li><li><a href="/chapter15/globals.html" class="sidebar-link">15.4 å…¨å±€å˜é‡åŠå…±äº«çŠ¶æ€</a></li><li><a href="/chapter15/network.html" class="sidebar-link">15.5 ç½‘ç»œè¯·æ±‚å°è£…</a></li><li><a href="/chapter15/entry.html" class="sidebar-link">15.6 APPå…¥å£åŠä¸»é¡µ</a></li><li><a href="/chapter15/login_page.html" class="sidebar-link">15.7 ç™»å½•é¡µ</a></li><li><a href="/chapter15/language_and_theme_setting.html" class="sidebar-link">15.8 å¤šè¯­è¨€å’Œå¤šä¸»é¢˜</a></li></ul></section></li><li><a href="/sponsor.html" class="sidebar-link">èµåŠ©</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_6-8-å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜"><a href="#_6-8-å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜" class="header-anchor">#</a> 6.8 å¯æ»šåŠ¨ç»„ä»¶å­é¡¹ç¼“å­˜</h1> <p>æœ¬èŠ‚å°†ä»‹ç»å¯æ»šåŠ¨ç»„ä»¶ä¸­ç¼“å­˜æŒ‡å®šå­é¡¹çš„é€šç”¨æ–¹æ¡ˆã€‚</p> <p>é¦–å…ˆå›æƒ³ä¸€ä¸‹ï¼Œåœ¨ä»‹ç» ListView æ—¶ï¼Œæœ‰ä¸€ä¸ª<code>addAutomaticKeepAlives</code> å±æ€§æˆ‘ä»¬å¹¶æ²¡æœ‰ä»‹ç»ï¼Œå¦‚æœ<code>addAutomaticKeepAlives</code> ä¸º <code>true</code>ï¼Œåˆ™ ListView ä¼šä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹æ·»åŠ ä¸€ä¸ª AutomaticKeepAlive çˆ¶ç»„ä»¶ã€‚è™½ç„¶ PageView çš„é»˜è®¤æ„é€ å‡½æ•°å’Œ PageView.builder æ„é€ å‡½æ•°ä¸­æ²¡æœ‰è¯¥å‚æ•°ï¼Œä½†å®ƒä»¬æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ª SliverChildDelegate æ¥è´Ÿè´£åˆ—è¡¨é¡¹çš„æŒ‰éœ€åŠ è½½ï¼Œè€Œåœ¨ SliverChildDelegate ä¸­æ¯å½“åˆ—è¡¨é¡¹æ„å»ºå®Œæˆåï¼ŒSliverChildDelegate éƒ½ä¼šä¸ºå…¶æ·»åŠ ä¸€ä¸ª AutomaticKeepAlive çˆ¶ç»„ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬å°±å…ˆä»‹ç»ä¸€ä¸‹ AutomaticKeepAlive ç»„ä»¶ã€‚</p> <h2 id="_6-8-1-automatickeepalive"><a href="#_6-8-1-automatickeepalive" class="header-anchor">#</a> 6.8.1 AutomaticKeepAlive</h2> <p>AutomaticKeepAlive çš„ç»„ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯å°†åˆ—è¡¨é¡¹çš„æ ¹ RenderObject çš„ keepAlive <strong>æŒ‰éœ€è‡ªåŠ¨æ ‡è®°</strong> ä¸º true æˆ– falseã€‚ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ ¹ RenderObject å¯¹åº”çš„ç»„ä»¶å°±æ˜¯åˆ—è¡¨é¡¹çš„æ ¹ Widgetï¼Œä»£è¡¨æ•´ä¸ªåˆ—è¡¨é¡¹ç»„ä»¶ï¼ŒåŒæ—¶æˆ‘ä»¬å°†åˆ—è¡¨ç»„ä»¶çš„ ViewportåŒºåŸŸ + cacheExtentï¼ˆé¢„æ¸²æŸ“åŒºåŸŸï¼‰ç§°ä¸º<strong>åŠ è½½åŒºåŸŸ</strong> ï¼š</p> <ol><li>å½“ keepAlive æ ‡è®°ä¸º false æ—¶ï¼Œå¦‚æœåˆ—è¡¨é¡¹æ»‘å‡ºåŠ è½½åŒºåŸŸæ—¶ï¼Œåˆ—è¡¨ç»„ä»¶å°†ä¼šè¢«é”€æ¯ã€‚</li> <li>å½“ keepAlive æ ‡è®°ä¸º true æ—¶ï¼Œå½“åˆ—è¡¨é¡¹æ»‘å‡ºåŠ è½½åŒºåŸŸåï¼ŒViewport ä¼šå°†åˆ—è¡¨ç»„ä»¶ç¼“å­˜èµ·æ¥ï¼›å½“åˆ—è¡¨é¡¹è¿›å…¥åŠ è½½åŒºåŸŸæ—¶ï¼ŒViewport ä»å…ˆä»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»ç¼“å­˜ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥å¤ç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™é‡æ–°åˆ›å»ºåˆ—è¡¨é¡¹ã€‚</li></ol> <p>é‚£ä¹ˆ AutomaticKeepAlive ä»€ä¹ˆæ—¶å€™ä¼šå°†åˆ—è¡¨é¡¹çš„ keepAlive æ ‡è®°ä¸º true æˆ– false å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¼€å‘è€…è¯´äº†ç®—ï¼Flutter ä¸­å®ç°äº†ä¸€å¥—ç±»ä¼¼ C/S çš„æœºåˆ¶ï¼ŒAutomaticKeepAlive å°±ç±»ä¼¼ä¸€ä¸ª Serverï¼Œå®ƒçš„å­ç»„ä»¶å¯ä»¥æ˜¯ Clientï¼Œè¿™æ ·å­ç»„ä»¶æƒ³æ”¹å˜æ˜¯å¦éœ€è¦ç¼“å­˜çš„çŠ¶æ€æ—¶å°±å‘ AutomaticKeepAlive å‘ä¸€ä¸ªé€šçŸ¥æ¶ˆæ¯ï¼ˆKeepAliveNotificationï¼‰ï¼ŒAutomaticKeepAlive æ”¶åˆ°æ¶ˆæ¯åä¼šå»æ›´æ”¹ keepAlive çš„çŠ¶æ€ï¼Œå¦‚æœæœ‰å¿…è¦åŒæ—¶åšä¸€äº›èµ„æºæ¸…ç†çš„å·¥ä½œï¼ˆæ¯”å¦‚ keepAlive ä» true å˜ä¸º false æ—¶ï¼Œè¦é‡Šæ”¾ç¼“å­˜ï¼‰ã€‚</p> <p>æˆ‘ä»¬åŸºäºä¸Šä¸€èŠ‚ PageView ç¤ºä¾‹ï¼Œå®ç°é¡µé¢ç¼“å­˜ï¼Œæ ¹æ®ä¸Šé¢çš„æè¿°å®ç°æ€è·¯å°±å¾ˆç®€å•äº†ï¼šè®©Page é¡µå˜æˆä¸€ä¸ª AutomaticKeepAlive Client å³å¯ã€‚ä¸ºäº†ä¾¿äºå¼€å‘è€…å®ç°ï¼ŒFlutter æä¾›äº†ä¸€ä¸ª AutomaticKeepAliveClientMixin ï¼Œæˆ‘ä»¬åªéœ€è¦è®© PageState æ··å…¥è¿™ä¸ª mixinï¼Œä¸”åŒæ—¶æ·»åŠ ä¸€äº›å¿…è¦æ“ä½œå³å¯ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> _PageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Page</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">with</span> <span class="token class-name">AutomaticKeepAliveClientMixin</span> <span class="token punctuation">{</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¿…é¡»è°ƒç”¨</span>
    <span class="token keyword">return</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>text</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">,</span> textScaleFactor<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  bool <span class="token keyword">get</span> wantKeepAlive <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦éœ€è¦ç¼“å­˜</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä»£ç å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æä¾›ä¸€ä¸ª <code>wantKeepAlive</code>ï¼Œå®ƒä¼šè¡¨ç¤º AutomaticKeepAlive æ˜¯å¦éœ€è¦ç¼“å­˜å½“å‰åˆ—è¡¨é¡¹ï¼›å¦å¤–æˆ‘ä»¬å¿…é¡»åœ¨ build æ–¹æ³•ä¸­è°ƒç”¨ä¸€ä¸‹ <code>super.build(context)</code>ï¼Œè¯¥æ–¹æ³•å®ç°åœ¨ AutomaticKeepAliveClientMixin ä¸­ï¼ŒåŠŸèƒ½å°±æ˜¯æ ¹æ®å½“å‰ <code>wantKeepAlive</code> çš„å€¼ç»™ AutomaticKeepAlive å‘é€æ¶ˆæ¯ï¼ŒAutomaticKeepAlive æ”¶åˆ°æ¶ˆæ¯åå°±ä¼šå¼€å§‹å·¥ä½œï¼Œå¦‚å›¾6-17æ‰€ç¤ºï¼š</p> <p><img src="/assets/img/6-17.f0e51c9d.png" alt="å›¾6-17"></p> <p>ç°åœ¨æˆ‘ä»¬é‡æ–°è¿è¡Œä¸€ä¸‹ç¤ºä¾‹ï¼Œå‘ç°æ¯ä¸ª Page é¡µåªä¼š build ä¸€æ¬¡ï¼Œç¼“å­˜æˆåŠŸäº†ã€‚</p> <p>éœ€è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬é‡‡ç”¨ PageView.custom æ„å»ºé¡µé¢æ—¶æ²¡æœ‰ç»™åˆ—è¡¨é¡¹åŒ…è£… AutomaticKeepAlive çˆ¶ç»„ä»¶ï¼Œåˆ™ä¸Šè¿°æ–¹æ¡ˆä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºæ­¤æ—¶Client å‘å‡ºæ¶ˆæ¯åï¼Œæ‰¾ä¸åˆ° Serverï¼Œ404 äº†ï¼ŒğŸ˜€ã€‚</p> <h2 id="_6-8-2-keepalivewrapper"><a href="#_6-8-2-keepalivewrapper" class="header-anchor">#</a> 6.8.2 KeepAliveWrapper</h2> <p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ AutomaticKeepAliveClientMixin å¿«é€Ÿçš„å®ç°é¡µé¢ç¼“å­˜åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ··å…¥çš„æ–¹å¼å®ç°ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œå› ä¸ºå¿…é¡»æ›´æ”¹ Page çš„ä»£ç ï¼Œæœ‰ä¾µå…¥æ€§ï¼Œè¿™å°±å¯¼è‡´ä¸æ˜¯å¾ˆçµæ´»ï¼Œæ¯”å¦‚ä¸€ä¸ªç»„ä»¶èƒ½åŒæ—¶åœ¨åˆ—è¡¨ä¸­å’Œåˆ—è¡¨å¤–ä½¿ç”¨ï¼Œä¸ºäº†åœ¨åˆ—è¡¨ä¸­ç¼“å­˜å®ƒï¼Œåˆ™æˆ‘ä»¬å¿…é¡»å®ç°ä¸¤ä»½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¬”è€…å°è£…äº†ä¸€ä¸ª KeepAliveWrapper ç»„ä»¶ï¼Œå¦‚æœå“ªä¸ªåˆ—è¡¨é¡¹éœ€è¦ç¼“å­˜ï¼Œåªéœ€è¦ä½¿ç”¨ KeepAliveWrapper åŒ…è£¹ä¸€ä¸‹å®ƒå³å¯ã€‚</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata function">@override</span>
<span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> children <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åªéœ€è¦ç”¨ KeepAliveWrapper åŒ…è£…ä¸€ä¸‹å³å¯</span>
    children<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span>child<span class="token punctuation">:</span><span class="token class-name">Page</span><span class="token punctuation">(</span> text<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token class-name">PageView</span><span class="token punctuation">(</span>children<span class="token punctuation">:</span> children<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸‹é¢æ˜¯ KeepAliveWrapper çš„å®ç°æºç ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">KeepAliveWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keepAlive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> bool keepAlive<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span> child<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  _KeepAliveWrapperState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_KeepAliveWrapperState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _KeepAliveWrapperState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">&gt;</span></span>
    <span class="token keyword">with</span> <span class="token class-name">AutomaticKeepAliveClientMixin</span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> widget<span class="token punctuation">.</span>child<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token keyword">covariant</span> <span class="token class-name">KeepAliveWrapper</span> oldWidget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>keepAlive <span class="token operator">!=</span> widget<span class="token punctuation">.</span>keepAlive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// keepAlive çŠ¶æ€éœ€è¦æ›´æ–°ï¼Œå®ç°åœ¨ AutomaticKeepAliveClientMixin ä¸­</span>
      <span class="token function">updateKeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  bool <span class="token keyword">get</span> wantKeepAlive <span class="token operator">=</span><span class="token operator">&gt;</span> widget<span class="token punctuation">.</span>keepAlive<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>ä¸‹é¢æˆ‘ä»¬å†åœ¨ ListView ä¸­æµ‹ä¸€ä¸‹ï¼š</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">KeepAliveTest</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">KeepAliveTest</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ListView</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">KeepAliveWrapper</span><span class="token punctuation">(</span>
        <span class="token comment">// ä¸º true åä¼šç¼“å­˜æ‰€æœ‰çš„åˆ—è¡¨é¡¹ï¼Œåˆ—è¡¨é¡¹å°†ä¸ä¼šé”€æ¯ã€‚</span>
        <span class="token comment">// ä¸º false æ—¶ï¼Œåˆ—è¡¨é¡¹æ»‘å‡ºé¢„åŠ è½½åŒºåŸŸåå°†ä¼šåˆ«é”€æ¯ã€‚</span>
        <span class="token comment">// ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„æ˜¯å¦å¿…è¦ï¼Œå› ä¸ºå¯¹æ‰€æœ‰åˆ—è¡¨é¡¹éƒ½ç¼“å­˜çš„ä¼šå¯¼è‡´æ›´å¤šçš„å†…å­˜æ¶ˆè€—</span>
        keepAlive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">ListItem</span><span class="token punctuation">(</span>index<span class="token punctuation">:</span> index<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ListItem</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token class-name">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> int index<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  _ListItemState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_ListItemState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> _ListItemState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListItem</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ListTile</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'</span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>index</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'dispose </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">widget<span class="token punctuation">.</span>index</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>å› ä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹éƒ½è¢«ç¼“å­˜äº†ï¼Œæ‰€ä»¥è¿è¡Œåæ»‘åŠ¨åˆ—è¡¨é¢„æœŸæ—¥å¿—é¢æ¿ä¸ä¼šæœ‰ä»»ä½•æ—¥å¿—ï¼Œå¦‚å›¾6-18æ‰€ç¤ºï¼š</p> <p><img src="/assets/img/6-18.57095457.png" alt="å›¾6-18"></p> <p>å¥½æˆ‘ä»¬é¢„æœŸä¸€è‡´ï¼Œæ—¥å¿—é¢æ¿æ²¡æœ‰æ—¥å¿—ã€‚å¦‚æœæˆ‘ä»¬å°†   keepAlive è®¾ä¸º falseï¼Œåˆ™å½“åˆ—è¡¨é¡¹æ»‘å‡ºé¢„æ¸²æŸ“åŒºåŸŸååˆ™ä¼šé”€æ¯ï¼Œæ—¥å¿—é¢æ¿å°†æœ‰è¾“å‡ºï¼Œå¦‚å›¾6-19æ‰€ç¤ºï¼š</p> <p><img src="/assets/img/6-19.568f28dc.png" alt="å›¾6-19"></p> <p>å¯è§æˆ‘ä»¬å°è£…çš„ KeepAliveWrapper èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œç¬”è€…å°† KeepAliveWrapper æ·»åŠ åˆ°äº† flukit ç»„ä»¶åº“ï¼Œå¦‚æœè¯»è€…éœ€è¦å¯ä»¥åœ¨ flukit ç»„ä»¶åº“ä¸­æ‰¾åˆ°å®ƒã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/chapter6/pageview.html" class="prev">
        6.7 PageViewä¸é¡µé¢ç¼“å­˜
      </a></span> <span class="next"><a href="/chapter6/tabview.html">
        6.9 TabBarView
      </a>
      â†’
    </span></p></div> <div style="text-align:center;"><img src="/assets/img/pay.a6c3cb25.jpeg" width="200"> <div> è¯·ä½œè€…å–æ¯å’–å•¡ </div></div> <div class="copyright"> ç‰ˆæƒæ‰€æœ‰ï¼Œç¦æ­¢ç§è‡ªè½¬å‘ã€å…‹éš†ç½‘ç«™ã€‚</div> <div class="f-links" style="text-align:center;"><a href="https://github.com/flutterchina">
          Flutterä¸­å›½å¼€æºé¡¹ç›®
        </a> |
        <a href="/join_us.html">
          å’Œä½œè€…åšåŒäº‹
        </a></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.aca657e0.js" defer></script><script src="/assets/js/41.42263e36.js" defer></script><script src="/assets/js/2.1bded63b.js" defer></script><script src="/assets/js/33.7402ce18.js" defer></script>
  </body>
</html>
